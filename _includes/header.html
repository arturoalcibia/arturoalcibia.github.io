{% assign sitePages = site.pages | sort: 'order' %}

<header>
  <nav>
    <ul>

        <li class="name"><a href="{{ site.url }}"> Arturo Alcibia </a>
          <ul>
            {% for entry in site.data.contact %}
              <li> <a href="{{ entry.link }}"> <i class="fa-cog {{ entry.icon }} fa-lg"></i></a> </li>
            {% endfor %}
          </ul>
        </li>

      {% for _page in sitePages %}

        <!-- Mark as current any page inside blogs/projects -->
        {% assign isSubUrl = false %}
        {% if page.path contains "_posts" and _page.title == "Blog" %}
          {% assign isSubUrl = true %}
        {% elsif page.path contains "_projects" and _page.title == "Projects" %}
          {% assign isSubUrl = true %}
        {% endif %}

        <!-- if page is current page, change the style -->
        {% if _page.path == page.path or isSubUrl %}
          {% assign btnClass = "current btn-nav" %}
        {% else %}
          {% assign btnClass = "btn-nav" %}
        {% endif %}

        <!-- skip any pages without the showInHeader set to true -->
        {% unless _page.showInHeader == true %}
          {% continue %}
        {% endunless %}

        <!-- skip any pages generated from pagination -->
        {% if _page.path contains "blog/page" %}
          {% continue %}
        {% endif %}

        <!-- if Blog page (index.html) change to main url -->
        {% if _page.title == "Blog" %}
            {% assign pageUrl = site.url %}
          {% else %}
            {% assign pageUrl = site.url | append: '/' | append: _page.title | downcase %}
          {% endif %}

        <a href="{{ pageUrl }}">
          <li class=" {{ btnClass }} ">{{ _page.title }}</li>
        </a>

      {% endfor %}
      </ul>
  </nav>
</header>
